<div class="card">
  <h3>Configuración de cuenta</h3>
  <p style="color:#555;margin-bottom:10px;">
    Desde aquí puedes actualizar tu información personal o cambiar tu contraseña.
  </p>

  <form id="formConfig" style="display:flex;flex-direction:column;gap:10px;">
    <label>Nombre</label>
    <input name="nombre" value="Andrea Robles" style="padding:8px;border:1px solid #ccc;border-radius:6px;">

    <label>Correo</label>
    <input type="email" name="correo" value="andrea.robles@example.com" style="padding:8px;border:1px solid #ccc;border-radius:6px;">

    <label>Contraseña (dejar vacío para no cambiar)</label>
    <input type="password" name="password" placeholder="••••••••" style="padding:8px;border:1px solid #ccc;border-radius:6px;">

    <button type="submit" style="background-color:#7b0018;color:white;padding:10px;border:none;border-radius:6px;cursor:pointer;">
      Guardar cambios
    </button>
  </form>

  <div id="msgConfig" style="display:none;color:green;margin-top:10px;font-weight:bold;">
    ✅ Cambios guardados correctamente.
  </div>

  <!-- === Botón de cierre de sesión === -->
  <hr style="margin:20px 0;border:none;border-top:1px solid #ccc;">
  <button id="btnLogout" 
          style="background:#a8001d;color:#fff;padding:10px 16px;border:none;border-radius:6px;cursor:pointer;">
    <i class="ri-logout-box-line"></i> Cerrar sesión
  </button>
</div>

{% if rol == 'administrador' %}
<div class="card" style="margin-top:16px">
  <h3>Gestión de permisos</h3>
  <p style="color:#555;margin-bottom:10px;">Asigna o modifica los roles de los usuarios del sistema.</p>

  <form id="formPermisos" style="display:flex;flex-direction:column;gap:10px;">
    <label>Usuario</label>
    <input name="usuario_permiso" placeholder="Ej: usuario1" style="padding:8px;border:1px solid #ccc;border-radius:6px;">

    <label>Nuevo Rol</label>
    <select name="nuevo_rol" style="padding:8px;border:1px solid #ccc;border-radius:6px;">
      <option value="alumno">Alumno</option>
      <option value="docente">Docente</option>
      <option value="administrador">Administrador</option>
    </select>

    <button type="submit" style="background-color:#7b0018;color:white;padding:10px;border:none;border-radius:6px;cursor:pointer;">
      Actualizar rol
    </button>
  </form>

  <div id="msgPermisos" style="display:none;color:green;margin-top:10px;font-weight:bold;">
    ✅ Rol actualizado correctamente.
  </div>
</div>
{% endif %}

{% block extra_scripts %}
<script>
document.addEventListener("DOMContentLoaded", () => {
  const formConfig = document.getElementById("formConfig");
  const msgConfig = document.getElementById("msgConfig");
  const btnLogout = document.getElementById("btnLogout");
  const formPermisos = document.getElementById("formPermisos");
  const msgPermisos = document.getElementById("msgPermisos");

  // Simula guardar configuración
  if (formConfig) {
    formConfig.addEventListener("submit", e => {
      e.preventDefault();
      msgConfig.style.display = "block";
      setTimeout(() => msgConfig.style.display = "none", 3000);
    });
  }

  // Simula actualización de permisos (solo si existe)
  if (formPermisos) {
    formPermisos.addEventListener("submit", e => {
      e.preventDefault();
      msgPermisos.style.display = "block";
      setTimeout(() => msgPermisos.style.display = "none", 3000);
    });
  }

  // Redirige al home.html al cerrar sesión
  if (btnLogout) {
    btnLogout.addEventListener("click", () => {
      window.location.href = "/home.html"; // Ajusta la ruta según tu estructura
    });
  }
});
</script>
{% endblock %}

